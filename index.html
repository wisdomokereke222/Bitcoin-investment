<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bitcoin Investment</title>
<meta name="description" content="Premium wallet UI — account dashboard and 24h charts." />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
<style>
:root{
  --bg1:#050816; --bg2:#071127; --card:#0c1320;
  --muted:#98a6b3; --text:#e8f1f8; --accent:#7c5cff; --accent2:#22d3ee;
  --good:#10b981; --danger:#ff6b6b; --glass: rgba(255,255,255,0.03);
  --radius:14px;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--text)}
.app{max-width:1200px;margin:18px auto;border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,0.04);
     box-shadow:0 20px 60px rgba(2,6,23,0.7);display:flex;flex-direction:column;height:calc(100vh - 36px)}
.header{display:flex;align-items:center;padding:18px 22px;gap:16px;background:linear-gradient(90deg, rgba(124,92,255,0.03), rgba(34,211,238,0.01));border-bottom:1px solid rgba(255,255,255,0.02)}
.logo{width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:grid;place-items:center;font-weight:800;color:#041022}
.title{font-weight:800;font-size:18px}
.subtitle{font-size:13px;color:var(--muted);margin-top:4px}
.header-right{margin-left:auto;display:flex;align-items:center;gap:12px}
.nav-tabs{display:flex;gap:8px;background:var(--glass);padding:6px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
.tab{padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600;color:var(--muted);font-size:14px}
.tab.active{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#041022;box-shadow:0 6px 18px rgba(34,211,238,0.06)}
.atm{font-size:13px;color:#bff5d6}

/* content */
.content{display:flex;flex:1;min-height:0}
.side{width:420px;min-width:320px;padding:22px;border-right:1px solid rgba(255,255,255,0.03);background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);display:flex;flex-direction:column;gap:14px}
.card{background:var(--card);border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,0.03)}
.user{font-weight:800;font-size:16px}
.amount{font-size:36px;font-weight:900;color:#7ef3c5;margin-top:8px;transition:all .4s ease}
.controls{display:flex;gap:8px;align-items:center;margin-top:10px}
select{padding:8px 10px;border-radius:10px;background:var(--glass);border:1px solid rgba(255,255,255,0.04);color:var(--text)}
.btn{padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);cursor:pointer}
.muted{color:var(--muted);font-size:13px}
.status{margin-top:12px;padding:10px;border-radius:10px;background:rgba(16,185,129,0.06);border:1px solid rgba(16,185,129,0.12);color:#bff5d6;font-weight:700}
.fee{margin-top:8px;color:var(--danger);font-weight:800}
.txList{margin-top:12px;display:flex;flex-direction:column;gap:10px}
.tx{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.006), rgba(255,255,255,0.002));border:1px solid rgba(255,255,255,0.02)}
.tx .meta{font-size:13px;color:var(--muted)}

/* main */
.main{flex:1;padding:22px;display:flex;flex-direction:column;gap:12px;overflow:auto}
.card-hero{display:flex;justify-content:space-between;gap:12px;align-items:center;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border:1px solid rgba(255,255,255,0.03)}
.conv{display:flex;align-items:center;gap:12px}
.conv img{width:60px;height:60px;border-radius:8px;background:rgba(255,255,255,0.02);padding:8px}
.conv-amount{font-weight:900;font-size:20px}
.controls-right{display:flex;flex-direction:column;align-items:flex-end;gap:8px}
.small-muted{font-size:13px;color:var(--muted)}
.autoBtn{padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);cursor:pointer}

.charts-grid{display:grid;grid-template-columns:1fr;gap:14px}
@media(min-width:980px){ .charts-grid{grid-template-columns:1fr 1fr} }
.chart-card{padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border:1px solid rgba(255,255,255,0.03)}
canvas{width:100% !important;height:260px !important;background:transparent;border-radius:8px}

/* charts view */
.full-charts{display:flex;flex-direction:column;gap:12px}

/* login overlay */
.loginWrap{position:fixed;inset:0;display:grid;place-items:center;background:linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.6));z-index:9999}
.loginBox{width:480px;max-width:94%;background:var(--card);padding:28px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 18px 50px rgba(2,6,23,0.8)}
.input{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);margin-top:10px}
.loginBtn{margin-top:14px;padding:12px 14px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#041022;font-weight:800;cursor:pointer;width:100%}
.small-muted2{font-size:13px;color:var(--muted);margin-top:10px;text-align:center}

.footer-note{font-size:12px;color:var(--muted);margin-top:8px;text-align:center}

/* animations */
.fadeIn{animation:fadeIn .28s ease both}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
</style>
</head>
<body>
  <div class="app" role="application" aria-label="Bitcoin Investment">
    <div class="header">
      <div class="logo">CW</div>
      <div>
        <div class="title">Bitcoin Investment</div>
        <div class="subtitle">Live conversion of a €500,000 balance — Hello, <strong>Brigitte Maria Moor</strong></div>
      </div>
      <div class="header-right">
        <div class="nav-tabs" role="tablist">
          <div id="tab-dashboard" class="tab active" role="tab">Dashboard</div>
          <div id="tab-charts" class="tab" role="tab">Charts</div>
        </div>
        <div class="atm">ATM Status: <strong style="color:#9ef6c9">Activated</strong></div>
      </div>
    </div>

    <div class="content">
      <div class="side">
        <div class="card">
          <div style="display:flex;align-items:center;justify-content:space-between">
            <div>
              <div class="user">Brigitte Maria Moor</div>
              <div class="muted">Account balance</div>
            </div>
            <div style="text-align:right">
              <div class="small-muted">Transaction fee</div>
              <div class="fee">€700</div>
            </div>
          </div>

          <div class="amount" id="displayAmount">€500,000.00</div>

          <div class="controls">
            <label class="small-muted" for="currencySelect">View as:</label>
            <select id="currencySelect" aria-label="View currency">
              <option value="EUR">EUR (Euro)</option>
              <option value="BTC">BTC (Bitcoin)</option>
              <option value="ETH">ETH (Ethereum)</option>
              <option value="USDT">USDT (Tether)</option>
            </select>
            <button id="refreshNow" class="btn">Refresh</button>
          </div>

          <div id="statusBox" class="status">Rates loaded</div>

          <div class="txList" id="txList" aria-live="polite">
            <!-- transactions will be injected here -->
          </div>

          <div class="footer-small">© <span id="year"></span> CW</div>
        </div>
      </div>

      <div class="main">
        <div id="dashboardView" class="fadeIn">
          <div class="card card-hero">
            <div class="conv">
              <img id="convIcon" src="https://upload.wikimedia.org/wikipedia/commons/5/5c/Euro_symbol_black.svg" alt="icon">
              <div>
                <div class="small-muted">Conversion preview</div>
                <div class="conv-amount" id="convAmount">€500,000.00</div>
                <div class="small-muted" id="convCurrency">EUR</div>
                <div class="small-muted" style="margin-top:10px">Rates from CoinGecko — refreshed automatically.</div>
              </div>
            </div>

            <div class="controls-right">
              <div class="small-muted">Auto refresh</div>
              <button id="autoToggle" class="autoBtn">Auto: ON</button>
              <div class="small-muted" style="margin-top:12px">Last update: <span id="lastUpdate">—</span></div>
            </div>
          </div>

          <div class="charts-grid" style="margin-top:14px">
            <div class="chart-card">
              <div class="small-muted">BTC (24h)</div>
              <canvas id="miniBtc"></canvas>
            </div>
            <div class="chart-card">
              <div class="small-muted">ETH (24h)</div>
              <canvas id="miniEth"></canvas>
            </div>
            <div class="chart-card">
              <div class="small-muted">USDT (24h)</div>
              <canvas id="miniUsdt"></canvas>
            </div>
          </div>
        </div>

        <div id="chartsView" style="display:none">
          <div class="card chart-card">
            <div style="display:flex;align-items:center;justify-content:space-between">
              <div>
                <div style="font-weight:800">24-hour charts</div>
                <div class="small-muted">Interactive BTC / ETH / USDT price charts (EUR)</div>
              </div>
              <div>
                <label class="small-muted">Resolution</label>
                <select id="intervalSelect" class="btn" style="padding:6px;border-radius:8px;background:transparent;color:var(--text);">
                  <option value="hourly">Hourly</option>
                  <option value="minutely">5-minute</option>
                </select>
              </div>
            </div>

            <div class="full-charts" style="margin-top:12px">
              <div class="chart-card"><canvas id="btcChartFull"></canvas></div>
              <div class="chart-card"><canvas id="ethChartFull"></canvas></div>
              <div class="chart-card"><canvas id="usdtChartFull"></canvas></div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Login overlay -->
  <div id="loginOverlay" class="loginWrap" role="dialog" aria-modal="true">
    <div class="loginBox">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="logo" style="width:48px;height:48px;border-radius:10px">CW</div>
        <div>
          <div style="font-weight:800">Bitcoin Investment</div>
          <div class="small-muted">Secure access</div>
        </div>
      </div>

      <input id="loginEmail" class="input" placeholder="Email">
      <input id="loginPass" class="input" placeholder="Password" type="password">
      <button id="loginBtn" class="loginBtn">Sign in</button>
      <div class="small-muted2">Name displayed will be <strong>Brigitte Maria Moor</strong>.</div>
      <div class="footer-note"></div>
    </div>
  </div>

<script>
// App constants and state
const BASE_EUR = 500000;
const ICONS = {
  EUR: "https://upload.wikimedia.org/wikipedia/commons/5/5c/Euro_symbol_black.svg",
  BTC: "https://cryptologos.cc/logos/bitcoin-btc-logo.svg?v=025",
  ETH: "https://cryptologos.cc/logos/ethereum-eth-logo.svg?v=025",
  USDT: "https://cryptologos.cc/logos/tether-usdt-logo.svg?v=025"
};
let rates = {BTC:null, ETH:null, USDT:null};
let auto = true, autoTimer = null;
let miniBtcChart, miniEthChart, miniUsdtChart, fullBtcChart, fullEthChart, fullUsdtChart;

// UI elements
const currencySelect = document.getElementById('currencySelect');
const displayAmount = document.getElementById('displayAmount');
const convAmount = document.getElementById('convAmount');
const convCurrency = document.getElementById('convCurrency');
const convIcon = document.getElementById('convIcon');
const statusBox = document.getElementById('statusBox');
const txList = document.getElementById('txList');
const lastUpdate = document.getElementById('lastUpdate');
const refreshNow = document.getElementById('refreshNow');
const autoToggle = document.getElementById('autoToggle');
const intervalSelect = document.getElementById('intervalSelect');
const tabDashboard = document.getElementById('tab-dashboard');
const tabCharts = document.getElementById('tab-charts');
const dashboardView = document.getElementById('dashboardView');
const chartsView = document.getElementById('chartsView');
const loginOverlay = document.getElementById('loginOverlay');
const loginBtn = document.getElementById('loginBtn');
const yearSpan = document.getElementById('year');

yearSpan.textContent = new Date().getFullYear();

// Helper: format EUR
function fmtEUR(v){ return new Intl.NumberFormat(undefined,{style:'currency',currency:'EUR'}).format(v); }

// Animate numeric counter (from -> to)
function animateValue(el, start, end, decimals=2, duration=700){
  const startTime = performance.now();
  function step(now){
    const t = Math.min(1,(now - startTime)/duration);
    const eased = t<.5?2*t*t: -1 + (4-2*t)*t; // approximate easeInOut
    const value = start + (end - start) * eased;
    if(decimals===0) el.textContent = Math.round(value).toString();
    else el.textContent = fmtEUR(Number(value.toFixed(decimals)));
    if(t<1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

// Render conversion based on current rates and selected currency
function renderConversion(){
  const cur = currencySelect.value;
  if(cur === 'EUR'){
    animateValue(displayAmount, parseFloat(displayAmount.dataset.current||BASE_EUR), BASE_EUR, 2, 700);
    displayAmount.dataset.current = BASE_EUR;
    convAmount.textContent = fmtEUR(BASE_EUR);
    convCurrency.textContent = 'EUR';
    convIcon.src = ICONS.EUR;
  } else {
    const rate = rates[cur];
    const qty = rate ? BASE_EUR / rate : 0;
    // show animated euro on left, crypto qty on convAmount
    animateValue(displayAmount, parseFloat(displayAmount.dataset.current||BASE_EUR), BASE_EUR, 2, 700);
    displayAmount.dataset.current = BASE_EUR;
    if(cur==='BTC') convAmount.textContent = qty.toFixed(6) + ' BTC';
    if(cur==='ETH') convAmount.textContent = qty.toFixed(4) + ' ETH';
    if(cur==='USDT') convAmount.textContent = qty.toFixed(2) + ' USDT';
    convCurrency.textContent = cur;
    convIcon.src = ICONS[cur];
  }
}

// Fetch latest simple rates (EUR per unit)
async function fetchSimpleRates(){
  statusBox.textContent = 'Fetching latest rates...';
  try{
    const res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,tether&vs_currencies=eur');
    const data = await res.json();
    rates.BTC = data.bitcoin.eur;
    rates.ETH = data.ethereum.eur;
    rates.USDT = data.tether.eur;
    statusBox.textContent = 'Rates loaded';
    lastUpdate.textContent = new Date().toLocaleTimeString();
    renderConversion();
    return true;
  }catch(err){
    console.error(err);
    statusBox.textContent = 'Error loading rates';
    return false;
  }
}

// Fetch market_chart (1 day) and return prepared labels & values
async function fetchMarketChart(coinId, interval='hourly'){
  try{
    // use daily 1 day with hourly/minutely granularity
    const res = await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}/market_chart?vs_currency=eur&days=1&interval=${interval}`);
    const data = await res.json();
    const prices = data.prices || [];
    const labels = prices.map(p => new Date(p[0]).toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'}));
    const values = prices.map(p => p[1]);
    return {labels, values};
  }catch(err){
    console.error('chart fetch error', coinId, err);
    return {labels:[], values:[]};
  }
}

// Create Chart.js chart
function createChart(ctx, labels, data, color, label){
  return new Chart(ctx, {
    type:'line',
    data:{ labels, datasets:[{ label, data, borderColor:color, backgroundColor:color+'22', pointRadius:0, tension:0.22 }]},
    options:{
      animation:{duration:700},
      scales:{ x:{ ticks:{color:'#9aa4b2'}, grid:{color:'rgba(255,255,255,0.02)'} }, y:{ ticks:{color:'#9aa4b2'}, grid:{color:'rgba(255,255,255,0.02)'} } },
      plugins:{ legend:{ labels:{ color:'#dbeafe' } } },
      maintainAspectRatio:false
    }
  });
}

// Load mini charts and full charts
async function loadCharts(){
  // determine interval
  const interval = intervalSelect.value === 'minutely' ? 'minutely' : 'hourly';
  const [btc,eth,usdt] = await Promise.all([
    fetchMarketChart('bitcoin', interval),
    fetchMarketChart('ethereum', interval),
    fetchMarketChart('tether', interval)
  ]);

  // mini charts
  if(miniBtcChart) miniBtcChart.destroy();
  if(miniEthChart) miniEthChart.destroy();
  if(miniUsdtChart) miniUsdtChart.destroy();

  miniBtcChart = createChart(document.getElementById('miniBtc').getContext('2d'), btc.labels, btc.values, '#f7931a', 'BTC');
  miniEthChart = createChart(document.getElementById('miniEth').getContext('2d'), eth.labels, eth.values, '#6f6ff7', 'ETH');
  miniUsdtChart = createChart(document.getElementById('miniUsdt').getContext('2d'), usdt.labels, usdt.values, '#26a17b', 'USDT');

  // full charts
  if(fullBtcChart) fullBtcChart.destroy();
  if(fullEthChart) fullEthChart.destroy();
  if(fullUsdtChart) fullUsdtChart.destroy();

  fullBtcChart = createChart(document.getElementById('btcChartFull').getContext('2d'), btc.labels, btc.values, '#f7931a', 'BTC');
  fullEthChart = createChart(document.getElementById('ethChartFull').getContext('2d'), eth.labels, eth.values, '#6f6ff7', 'ETH');
  fullUsdtChart = createChart(document.getElementById('usdtChartFull').getContext('2d'), usdt.labels, usdt.values, '#26a17b', 'USDT');
}

// Build realistic transaction history
function buildTransactions(){
  // generate timestamps in past 3 days
  const now = Date.now();
  const txs = [
    {time: now - 2*60*60*1000, type:'Bought', coin:'BTC', qty:0.255432},
    {time: now - 26*60*60*1000, type:'Sold', coin:'ETH', qty:1.2134},
    {time: now - 40*60*60*1000, type:'Swap', coin:'USDT', qty:12000},
    {time: now - 5*60*60*1000, type:'Bought', coin:'BTC', qty:0.05},
    {time: now - 12*60*60*1000, type:'Sold', coin:'ETH', qty:0.8}
  ];

  // Clear and render
  txList.innerHTML = '';
  txs.forEach(tx => {
    const li = document.createElement('div'); li.className='tx';
    const left = document.createElement('div');
    const dt = new Date(tx.time);
    const timestr = dt.toLocaleString();
    const title = document.createElement('div'); title.innerHTML = `<strong>${tx.type} ${tx.qty} ${tx.coin}</strong>`;
    const meta = document.createElement('div'); meta.className='meta'; meta.textContent = `${timestr} — Converted to EUR`;
    left.appendChild(title); left.appendChild(meta);

    const right = document.createElement('div');
    // compute EUR equivalent using current rates if available
    const rate = rates[tx.coin] || 0;
    const eurVal = rate ? (tx.qty * rate) : null;
    right.innerHTML = eurVal ? fmtEUR(eurVal) : '—';

    li.appendChild(left); li.appendChild(right);
    txList.appendChild(li);
  });
}

// Auto refresh control
function startAuto(){ stopAuto(); autoTimer = setInterval(async ()=>{ await fetchSimpleRates(); await loadCharts(); buildTransactions(); }, 10000); }
function stopAuto(){ if(autoTimer) clearInterval(autoTimer); autoTimer = null; }

// Tab switching
tabDashboard.addEventListener('click', ()=>{ tabDashboard.classList.add('active'); tabCharts.classList.remove('active'); dashboardView.style.display='block'; chartsView.style.display='none'; });
tabCharts.addEventListener('click', ()=>{ tabCharts.classList.add('active'); tabDashboard.classList.remove('active'); dashboardView.style.display='none'; chartsView.style.display='block'; });

// Events
loginBtn.addEventListener('click', async ()=>{
  loginOverlay.style.display = 'none';
  // initial fetches
  await fetchSimpleRates();
  await loadCharts();
  buildTransactions();
  renderConversion();
  if(auto) startAuto();
});

refreshNow.addEventListener('click', async ()=>{ await fetchSimpleRates(); await loadCharts(); buildTransactions(); });
currencySelect.addEventListener('change', renderConversion);
autoToggle.addEventListener('click', ()=>{ auto = !auto; autoToggle.textContent = auto ? 'Auto: ON' : 'Auto: OFF'; if(auto) startAuto(); else stopAuto(); });
intervalSelect.addEventListener('change', ()=>{ loadCharts(); });

// initial render: set default texts
displayAmount.dataset.current = BASE_EUR;
displayAmount.textContent = fmtEUR(BASE_EUR);
convAmount.textContent = fmtEUR(BASE_EUR);
convCurrency.textContent = 'EUR';
convIcon.src = ICONS.EUR;
autoToggle.textContent = 'Auto: ON';
lastUpdate.textContent = '—';

// Accessibility: allow Enter to submit login
document.getElementById('loginPass').addEventListener('keyup', (e)=>{ if(e.key==='Enter') loginBtn.click(); });

</script>
</body>
</html>
